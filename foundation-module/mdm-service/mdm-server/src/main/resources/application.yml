synapse:
  databases:
    # 使用SQL注解功能（推荐）
    sql-annotation:
      enabled: true
    # 禁用auto-repository避免冲突
    auto-repository:
      enabled: false
  datasource:
    mybatis-plus:
      configuration:
        log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
        map-underscore-to-camel-case: true
      global-config:
        banner: false
    # 字段转换配置
    field-conversion:
      enabled: true
      strategy: CAMEL_TO_UNDERLINE
    failover:
      enabled: true
      strategy: HEALTHY_FIRST  # 主数据源优先
      max-retry-times: 3
      retry-interval: 1000
      detection-interval: 5000
      recovery-interval: 10000
    # 健康检查配置
    health-check:
      enabled: true
      interval: 30000  # 30秒检查一次
      timeout: 5000    # 5秒超时
      check-on-startup: true
      max-retries: 4   # 最大重试4次
      recovery-interval: 10000
  security:
    enabled: true
    jwt:
      header-name: Authorization
      secret: SynapseMOM@2024!SecureJWTKey#256
      expiration: 86400
      prefix: Bearer 

# 日志配置
logging:
  level:
    root: error
    com.indigo.databases: INFO  # 开启数据源相关的调试日志
    com.indigo.databases.health: INFO  # 健康检查日志
    com.indigo.databases.routing: INFO  # 路由决策日志
#    com.indigo: INFO
#    com.indigo.security: INFO  # 开启安全相关的调试日志


